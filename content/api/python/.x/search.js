let input=document.getElementById("search-box"),results_container=document.getElementById("search-results-container"),results_list=document.getElementById("search-results"),searchInDocstringsButton=document.getElementById("search-docstrings-button"),searchInDocstringsCheckbox=document.getElementById("toggle-search-in-docstrings-checkbox");var isSearchReadyPromise=null,_setLongSearchInfosTimeout=null;function htmlEncode(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function _setInfos(e,t,n){document.getElementById(n).textContent=e,e.length>0?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"}function setStatus(e){document.getElementById("search-status").textContent=e}function setWarning(e){_setInfos(e,"search-warn-box","search-warn")}function setErrorStatus(){resetLongSearchTimerInfo(),setStatus("Something went wrong."),setErrorInfos()}function setErrorInfos(e){setWarning(null!=e?e:"Error: See development console for details.")}function resetLongSearchTimerInfo(){_setLongSearchInfosTimeout&&clearTimeout(_setLongSearchInfosTimeout)}function launchLongSearchTimerInfo(){_setLongSearchInfosTimeout=setTimeout(setLongSearchInfos,1e4)}function setLongSearchInfos(){setWarning("This is taking longer than usual... You can keep waiting for the search to complete, or retry the search with other terms.")}function hideResultContainer(){results_container.style.display="none",document.body.classList.contains("search-help-hidden")||document.body.classList.add("search-help-hidden")}function showResultContainer(){results_container.style.display="block",updateClearSearchBtn()}function toggleSearchHelpText(){document.body.classList.toggle("search-help-hidden"),document.body.classList.contains("search-help-hidden")&&0==input.value.length?hideResultContainer():showResultContainer()}function resetResultList(){resetLongSearchTimerInfo(),results_list.innerHTML="",setWarning(""),setStatus("")}function clearSearch(){stopSearching(),input.value="",updateClearSearchBtn()}function stopSearching(){hideResultContainer(),resetResultList(),_stopSearchingProcess()}function _stopSearchingProcess(){abortSearch(),restartSearchWorker()}function updateClearSearchBtn(){input.value.length>0?document.getElementById("search-clear-button").style.display="inline-block":document.getElementById("search-clear-button").style.display="none"}var SEARCH_DEFAULT_DELAY=100,SEARCH_INCREASED_DELAY=200,SEARCH_INDEX_SIZE_TRESH_INCREASE_DELAY=10,SEARCH_INDEX_SIZE_TRESH_DISABLE_SEARCH_AS_YOU_TYPE=20,SEARCH_AUTO_WILDCARD=!0;function _getIndexSizePromise(e){return httpGetPromise(e).then((e=>{if(null==e)return 0;return e.length/1e6}))}function _getSearchDelayPromise(e){return _getIndexSizePromise(e).then((e=>{var t=SEARCH_DEFAULT_DELAY;return 0===e||e>SEARCH_INDEX_SIZE_TRESH_INCREASE_DELAY&&(t=SEARCH_INCREASED_DELAY),t}))}function _getIsSearchReadyPromise(){return Promise.all([httpGetPromise("all-documents.html"),httpGetPromise("searchindex.json"),httpGetPromise("fullsearchindex.json"),httpGetPromise("lunr.js")])}function searchAsYouType(){input.value.length>0&&showResultContainer(),_getIndexSizePromise("searchindex.json").then((e=>{e>SEARCH_INDEX_SIZE_TRESH_DISABLE_SEARCH_AS_YOU_TYPE?0===input.value.length?launchSearch():setTimeout((()=>{_stopSearchingProcess(),resetResultList(),setStatus("Press 'Enter' to search.")})):launchSearch()}))}searchEventsEnv.addEventListener("searchStarted",(e=>{setStatus("Searching...")}));var _lastSearchStartTime=null,_lastSearchInput=null;function launchSearch(e){let t=performance.now(),n=input.value;if(t-_lastSearchStartTime<1&&n===_lastSearchInput)return;if(updateClearSearchBtn(),_lastSearchStartTime=t,_lastSearchInput=n,0===n.length)return void stopSearching();if(!window.Worker)return void setStatus("Cannot search: JavaScript Worker API is not supported in your browser. ");resetResultList(),showResultContainer(),setStatus("...");let s=_isSearchInDocstringsEnabled()?"fullsearchindex.json":"searchindex.json",r=_isSearchInDocstringsEnabled()?["name","names","qname","docstring"]:["name","names","qname"];return resetLongSearchTimerInfo(),launchLongSearchTimerInfo(),_getSearchDelayPromise(s).then((a=>(null==isSearchReadyPromise&&(isSearchReadyPromise=_getIsSearchReadyPromise()),isSearchReadyPromise.then((o=>lunrSearch(n,s,r,"lunr.js",e?0:a,SEARCH_AUTO_WILDCARD).then((e=>{if(t==_lastSearchStartTime){if(!e)throw setErrorStatus(),new Error("No data to show");return 0==e.length?(setStatus('No results matches "'+htmlEncode(n)+'"'),void resetLongSearchTimerInfo()):(setStatus("One sec..."),fetchResultsData(e,"all-documents.html").then((s=>{t==_lastSearchStartTime&&(resetLongSearchTimerInfo(),displaySearchResults(n,s,e),console.log('Search for "'+n+'" took '+((performance.now()-t)/1e3).toString()+" seconds."))})))}}))))))).catch((e=>{_handleErr(e)}))}function _handleErr(e){console.dir(e),setStatus(""),e.message?(resetLongSearchTimerInfo(),setWarning(e.message)):setErrorStatus()}function displaySearchResults(e,t,n){resetResultList(),t.forEach((e=>{results_list.appendChild(buildSearchResult(e))})),n.length>500&&setWarning("Your search yielded a lot of results! Maybe try with other terms?");let s=t.filter((function(e){return!e.querySelector(".privacy").innerHTML.includes("PRIVATE")}));0==s.length?setStatus('No results matches "'+htmlEncode(e)+'". Some private objects matches your search though.'):setStatus('Search for "'+htmlEncode(e)+'" yielded '+s.length+" "+(1===s.length?"result":"results")+".")}function _isSearchInDocstringsEnabled(){return searchInDocstringsCheckbox.checked}function toggleSearchInDocstrings(){searchInDocstringsCheckbox.checked?searchInDocstringsButton.classList.add("label-success"):searchInDocstringsButton.classList.contains("label-success")&&searchInDocstringsButton.classList.remove("label-success"),input.value.length>0&&launchSearch(!0)}input.oninput=e=>{setTimeout((()=>{searchAsYouType()}),0)},input.onkeyup=e=>{"Enter"===e.key&&launchSearch(!0)},input.onfocus=e=>{isSearchReadyPromise=_getIsSearchReadyPromise()},document.onload=e=>{setTimeout((()=>{isSearchReadyPromise=_getIsSearchReadyPromise()}),500)},document.addEventListener("keyup",(e=>{"Escape"!==(e=e||window.event).key&&"Esc"!==e.key||hideResultContainer()})),window.addEventListener("load",(e=>{document.getElementById("search-box-container").style.display="block",document.getElementById("search-help-box").style.display="block",hideResultContainer()})),window.addEventListener("click",(e=>{if(e){if(!e.target.closest("#search-results-container")&&!e.target.closest("#search-box")&&!e.target.closest("#search-help-button"))return void hideResultContainer();if(e.target.closest("#search-box")&&input.value.length>0)return void showResultContainer();if(link=e.target.closest("#search-results a"),link){if(page_parts=document.location.pathname.split("/"),current_page=page_parts[page_parts.length-1],href=link.getAttribute("href"),!href.startsWith(current_page))return;if(e.ctrlKey||e.shiftKey||e.metaKey)return;hideResultContainer()}}}));