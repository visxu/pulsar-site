class DarkModeToggle extends HTMLElement{static darkmode_cookie_name="prefers-dark";static lightmode_cookie_name="prefers-light";static icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="1em" width="1em"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><rect width="1" height="3" x="12" fill="currentColor" rx=".5"></rect><rect width="1" height="3" x="12" y="21" fill="currentColor" rx=".5"></rect><rect width="1" height="3" x="22" y="10.5" fill="currentColor" rx=".5" transform="rotate(90 22.5 12)"></rect><rect width="1" height="3" x="1" y="10.5" fill="currentColor" rx=".5" transform="rotate(90 1.5 12)"></rect><rect width="1" height="3" x="19" y="3" fill="currentColor" rx=".5" transform="rotate(-135 19.5 4.5)"></rect><rect width="1" height="3" x="19" y="18" fill="currentColor" rx=".5" transform="rotate(135 19.5 19.5)"></rect><rect width="1" height="3" x="4" y="3" fill="currentColor" rx=".5" transform="scale(1 -1) rotate(45 15.37 0)"></rect><rect width="1" height="3" x="4" y="18" fill="currentColor" rx=".5" transform="scale(1 -1) rotate(-45 -42.57 0)"></rect><circle cx="12" cy="12" r="6.5" stroke="currentColor"></circle><path fill="currentColor" stroke="currentColor" d="M12.5 18.48V5.52a6.5 6.5 0 010 12.96z"></path></g></svg>';static title="Toggle Light/Dark Mode";static prefersLightModeInDarkModeKey="prefers-light-mode-in-dark-mode";static prefersDarkModeInLightModeKey="prefers-dark-mode-in-light-mode";static _staticConstructor=function(){DarkModeToggle.enableDarkMode(DarkModeToggle.userPreference),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{DarkModeToggle.onSystemPreferenceChanged()})),document.addEventListener("visibilitychange",(e=>{"visible"===document.visibilityState&&DarkModeToggle.onSystemPreferenceChanged()}))}();static init(){$((function(){$(document).ready((function(){const e=document.createElement("dark-mode-toggle");function t(){const t=document.getElementById("titlearea"),o=document.getElementById("MSearchBox"),r=document.getElementById("main-menu"),d=document.getElementById("navrow1");let a=!1;if(r){a="none"!==window.getComputedStyle(r).display}const i=document.getElementById("searchBoxPos1");if(o)o.parentNode.appendChild(e);else if(d){const t=document.createElement("li");t.style="float: right;",t.appendChild(e),e.style="width: 24px; height: 25px; padding-top: 11px; float: right;";document.querySelector("#navrow1 > ul:first-of-type").appendChild(t)}else if(r&&a){const t=document.createElement("li");t.style="float: right;",t.appendChild(e),e.style="width: 14px; height: 36px; padding-top: 10px; float: right;",r.appendChild(t)}else i?(e.style="width: 24px; height: 36px; padding-top: 10px; float: right;",i.style="top: 0px;",i.appendChild(e)):t&&(e.style="width: 24px; height: 24px; position: absolute; right: 0px; top: 34px;",t.append(e))}e.title=DarkModeToggle.title,e.innerHTML=DarkModeToggle.icon,e.tabIndex=0,$(document).ready((()=>t())),$(window).resize((()=>t()));let o=!1;$(document).focusin((()=>o=!0)),$(document).focusout((()=>o=!1)),$(document).keyup((function(e){27!=e.keyCode||o||(e.stopPropagation(),DarkModeToggle.userPreference=!DarkModeToggle.userPreference)})),DarkModeToggle.setDarkModeVisibility(DarkModeToggle.darkModeEnabled)}))}))}constructor(){super(),this.onclick=this.toggleDarkMode,this.onkeypress=function(e){13==e.keyCode&&this.toggleDarkMode()}}static get systemPreference(){return window.matchMedia("(prefers-color-scheme: dark)").matches}static get prefersDarkModeInLightMode(){return"1"==Cookie.readSetting(DarkModeToggle.darkmode_cookie_name,"0")}static set prefersDarkModeInLightMode(e){e?Cookie.writeSetting(DarkModeToggle.darkmode_cookie_name,"1"):Cookie.eraseSetting(DarkModeToggle.darkmode_cookie_name)}static get prefersLightModeInDarkMode(){return"1"==Cookie.readSetting(DarkModeToggle.lightmode_cookie_name,"0")}static set prefersLightModeInDarkMode(e){e?Cookie.writeSetting(DarkModeToggle.lightmode_cookie_name,"1"):Cookie.eraseSetting(DarkModeToggle.lightmode_cookie_name)}static get userPreference(){return!DarkModeToggle.systemPreference&&DarkModeToggle.prefersDarkModeInLightMode||DarkModeToggle.systemPreference&&!DarkModeToggle.prefersLightModeInDarkMode}static set userPreference(e){DarkModeToggle.darkModeEnabled=e,e?DarkModeToggle.systemPreference?DarkModeToggle.prefersLightModeInDarkMode=!1:DarkModeToggle.prefersDarkModeInLightMode=!0:DarkModeToggle.systemPreference?DarkModeToggle.prefersLightModeInDarkMode=!0:DarkModeToggle.prefersDarkModeInLightMode=!1,DarkModeToggle.onUserPreferenceChanged()}static setDarkModeVisibility(e){let t,o;e?(t="inline-block",o="none"):(t="none",o="inline-block"),document.querySelectorAll(".dark-mode-visible").forEach((e=>e.style.display=t)),document.querySelectorAll(".light-mode-visible").forEach((e=>e.style.display=o))}static enableDarkMode(e){e?(DarkModeToggle.darkModeEnabled=!0,document.documentElement.classList.add("dark-mode"),document.documentElement.classList.remove("light-mode")):(DarkModeToggle.darkModeEnabled=!1,document.documentElement.classList.remove("dark-mode"),document.documentElement.classList.add("light-mode")),DarkModeToggle.setDarkModeVisibility(e)}static onSystemPreferenceChanged(){DarkModeToggle.darkModeEnabled=DarkModeToggle.userPreference,DarkModeToggle.enableDarkMode(DarkModeToggle.darkModeEnabled)}static onUserPreferenceChanged(){DarkModeToggle.enableDarkMode(DarkModeToggle.darkModeEnabled)}toggleDarkMode(){DarkModeToggle.userPreference=!DarkModeToggle.userPreference}}customElements.define("dark-mode-toggle",DarkModeToggle),DarkModeToggle.init();