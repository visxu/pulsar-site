"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[94025],{15680:(e,a,t)=>{t.d(a,{xA:()=>u,yg:()=>g});var n=t(96540);function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){i(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,n,i=function(e,a){if(null==e)return{};var t,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(i[t]=e[t]);return i}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var o=n.createContext({}),r=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},u=function(e){var a=r(e.components);return n.createElement(o.Provider,{value:a},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},d=n.forwardRef((function(e,a){var t=e.components,i=e.mdxType,s=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=r(t),d=i,g=m["".concat(o,".").concat(d)]||m[d]||c[d]||s;return t?n.createElement(g,l(l({ref:a},u),{},{components:t})):n.createElement(g,l({ref:a},u))}));function g(e,a){var t=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var s=t.length,l=new Array(s);l[0]=d;var p={};for(var o in a)hasOwnProperty.call(a,o)&&(p[o]=a[o]);p.originalType=e,p[m]="string"==typeof e?e:i,l[1]=p;for(var r=2;r<s;r++)l[r]=t[r];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},19365:(e,a,t)=>{t.d(a,{A:()=>l});var n=t(96540),i=t(20053);const s={tabItem:"tabItem_Ymn6"};function l(e){let{children:a,hidden:t,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,i.A)(s.tabItem,l),hidden:t},a)}},11470:(e,a,t)=>{t.d(a,{A:()=>I});var n=t(58168),i=t(96540),s=t(20053),l=t(23104),p=t(56347),o=t(57485),r=t(31682),u=t(89466);function m(e){return function(e){return i.Children.map(e,(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:a}=e;return!!a&&"object"==typeof a&&"value"in a}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:a,label:t,attributes:n,default:i}}=e;return{value:a,label:t,attributes:n,default:i}}))}function c(e){const{values:a,children:t}=e;return(0,i.useMemo)((()=>{const e=a??m(t);return function(e){const a=(0,r.X)(e,((e,a)=>e.value===a.value));if(a.length>0)throw new Error(`Docusaurus error: Duplicate values "${a.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[a,t])}function d(e){let{value:a,tabValues:t}=e;return t.some((e=>e.value===a))}function g(e){let{queryString:a=!1,groupId:t}=e;const n=(0,p.W6)(),s=function(e){let{queryString:a=!1,groupId:t}=e;if("string"==typeof a)return a;if(!1===a)return null;if(!0===a&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:a,groupId:t});return[(0,o.aZ)(s),(0,i.useCallback)((e=>{if(!s)return;const a=new URLSearchParams(n.location.search);a.set(s,e),n.replace({...n.location,search:a.toString()})}),[s,n])]}function y(e){const{defaultValue:a,queryString:t=!1,groupId:n}=e,s=c(e),[l,p]=(0,i.useState)((()=>function(e){let{defaultValue:a,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!d({value:a,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${a}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return a}const n=t.find((e=>e.default))??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:a,tabValues:s}))),[o,r]=g({queryString:t,groupId:n}),[m,y]=function(e){let{groupId:a}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(a),[n,s]=(0,u.Dv)(t);return[n,(0,i.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:n}),v=(()=>{const e=o??m;return d({value:e,tabValues:s})?e:null})();(0,i.useLayoutEffect)((()=>{v&&p(v)}),[v]);return{selectedValue:l,selectValue:(0,i.useCallback)((e=>{if(!d({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);p(e),r(e),y(e)}),[r,y,s]),tabValues:s}}var v=t(92303);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function T(e){let{className:a,block:t,selectedValue:p,selectValue:o,tabValues:r}=e;const u=[],{blockElementScrollPositionUntilNextRender:m}=(0,l.a_)(),c=e=>{const a=e.currentTarget,t=u.indexOf(a),n=r[t].value;n!==p&&(m(a),o(n))},d=e=>{let a=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=u.indexOf(e.currentTarget)+1;a=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(e.currentTarget)-1;a=u[t]??u[u.length-1];break}}a?.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":t},a)},r.map((e=>{let{value:a,label:t,attributes:l}=e;return i.createElement("li",(0,n.A)({role:"tab",tabIndex:p===a?0:-1,"aria-selected":p===a,key:a,ref:e=>u.push(e),onKeyDown:d,onClick:c},l,{className:(0,s.A)("tabs__item",h.tabItem,l?.className,{"tabs__item--active":p===a})}),t??a)})))}function b(e){let{lazy:a,children:t,selectedValue:n}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(a){const e=s.find((e=>e.props.value===n));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},s.map(((e,a)=>(0,i.cloneElement)(e,{key:a,hidden:e.props.value!==n}))))}function f(e){const a=y(e);return i.createElement("div",{className:(0,s.A)("tabs-container",h.tabList)},i.createElement(T,(0,n.A)({},e,a)),i.createElement(b,(0,n.A)({},e,a)))}function I(e){const a=(0,v.A)();return i.createElement(f,(0,n.A)({key:String(a)},e))}},33569:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>u,contentTitle:()=>o,default:()=>g,frontMatter:()=>p,metadata:()=>r,toc:()=>m});var n=t(58168),i=(t(96540),t(15680)),s=t(11470),l=t(19365);const p={id:"admin-api-topics",title:"Manage topics",sidebar_label:"Topics",description:"Learn how to manage topics using Pulsar CLI and admin APIs."},o=void 0,r={unversionedId:"admin-api-topics",id:"admin-api-topics",title:"Manage topics",description:"Learn how to manage topics using Pulsar CLI and admin APIs.",source:"@site/docs/admin-api-topics.md",sourceDirName:".",slug:"/admin-api-topics",permalink:"/docs/next/admin-api-topics",draft:!1,editUrl:"https://github.com/apache/pulsar-site/edit/main/docs/admin-api-topics.md",tags:[],version:"current",frontMatter:{id:"admin-api-topics",title:"Manage topics",sidebar_label:"Topics",description:"Learn how to manage topics using Pulsar CLI and admin APIs."},sidebar:"docsSidebar",previous:{title:"Tenants",permalink:"/docs/next/admin-api-tenants"},next:{title:"Transactions",permalink:"/docs/next/admin-api-transactions"}},u={},m=[{value:"Manage topic resources",id:"manage-topic-resources",level:2},{value:"List of topics",id:"list-of-topics",level:3},{value:"Grant permission",id:"grant-permission",level:3},{value:"Get permission",id:"get-permission",level:3},{value:"Revoke permission",id:"revoke-permission",level:3},{value:"Delete topic",id:"delete-topic",level:3},{value:"Unload topic",id:"unload-topic",level:3},{value:"Get stats",id:"get-stats",level:3},{value:"Get internal stats",id:"get-internal-stats",level:3},{value:"Peek messages",id:"peek-messages",level:3},{value:"Get message by ID",id:"get-message-by-id",level:3},{value:"Examine messages",id:"examine-messages",level:3},{value:"Get message ID",id:"get-message-id",level:3},{value:"Skip messages",id:"skip-messages",level:3},{value:"Skip all messages",id:"skip-all-messages",level:3},{value:"Reset cursor",id:"reset-cursor",level:3},{value:"Look up topic&#39;s owner broker",id:"look-up-topics-owner-broker",level:3},{value:"Look up partitioned topic&#39;s owner broker",id:"look-up-partitioned-topics-owner-broker",level:3},{value:"Get bundle",id:"get-bundle",level:3},{value:"Get subscriptions",id:"get-subscriptions",level:3},{value:"Last Message Id",id:"last-message-id",level:3},{value:"Get backlog size",id:"get-backlog-size",level:3},{value:"Configure deduplication snapshot interval",id:"configure-deduplication-snapshot-interval",level:3},{value:"Get deduplication snapshot interval",id:"get-deduplication-snapshot-interval",level:4},{value:"Set deduplication snapshot interval",id:"set-deduplication-snapshot-interval",level:4},{value:"Remove deduplication snapshot interval",id:"remove-deduplication-snapshot-interval",level:4},{value:"Configure inactive topic policies",id:"configure-inactive-topic-policies",level:3},{value:"Get inactive topic policies",id:"get-inactive-topic-policies",level:4},{value:"Set inactive topic policies",id:"set-inactive-topic-policies",level:4},{value:"Remove inactive topic policies",id:"remove-inactive-topic-policies",level:4},{value:"Configure offload policies",id:"configure-offload-policies",level:3},{value:"Get offload policies",id:"get-offload-policies",level:4},{value:"Set offload policies",id:"set-offload-policies",level:4},{value:"Remove offload policies",id:"remove-offload-policies",level:4},{value:"Manage non-partitioned topics",id:"manage-non-partitioned-topics",level:2},{value:"Create",id:"create",level:3},{value:"Delete",id:"delete",level:3},{value:"List",id:"list",level:3},{value:"Stats",id:"stats",level:3},{value:"Internal stats",id:"internal-stats",level:3},{value:"Manage partitioned topics",id:"manage-partitioned-topics",level:2},{value:"Create",id:"create-1",level:3},{value:"Create missed partitions",id:"create-missed-partitions",level:3},{value:"Get metadata",id:"get-metadata",level:3},{value:"Update",id:"update",level:3},{value:"Delete",id:"delete-1",level:3},{value:"List",id:"list-1",level:3},{value:"Stats",id:"stats-1",level:3},{value:"Internal stats",id:"internal-stats-1",level:3},{value:"Manage subscriptions",id:"manage-subscriptions",level:2},{value:"Create subscription",id:"create-subscription",level:3},{value:"Get subscription",id:"get-subscription",level:3},{value:"Unsubscribe subscription",id:"unsubscribe-subscription",level:3}],c={toc:m},d="wrapper";function g(e){let{components:a,...t}=e;return(0,i.yg)(d,(0,n.A)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"This page only shows ",(0,i.yg)("strong",{parentName:"p"},"some frequently used operations"),"."),(0,i.yg)("ul",{parentName:"admonition"},(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"For the latest and complete information about ",(0,i.yg)("inlineCode",{parentName:"p"},"Pulsar admin"),", including commands, flags, descriptions, and more, see ",(0,i.yg)("a",{parentName:"p",href:"pathname:///reference/#/next/pulsar-admin/"},"Pulsar admin docs"),".")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"For the latest and complete information about ",(0,i.yg)("inlineCode",{parentName:"p"},"REST API"),", including parameters, responses, samples, and more, see ",(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api#/"},"REST")," API doc.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"For the latest and complete information about ",(0,i.yg)("inlineCode",{parentName:"p"},"Java admin API"),", including classes, methods, descriptions, and more, see ",(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/api/admin/4.0.x/"},"Java admin API doc"),".")))),(0,i.yg)("p",null,"Pulsar has persistent and non-persistent topics. A persistent topic is a logical endpoint for publishing and consuming messages. The topic name structure for persistent topics is:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"persistent://tenant/namespace/topic\n")),(0,i.yg)("p",null,"Non-persistent topics are used in applications that only consume real-time published messages and do not need persistent guarantees. In this way, it reduces message-publish latency by removing overhead of persisting messages. The topic name structure for non-persistent topics is:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"non-persistent://tenant/namespace/topic\n")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},'Topic naming: due to backward compatibility, some special characters, e.g., "/," are allowed as a part of the topic name. But it\'s recommended not to use special characters as a part of the topic name.')),(0,i.yg)("h2",{id:"manage-topic-resources"},"Manage topic resources"),(0,i.yg)("p",null,"Whether it is a persistent or non-persistent topic, you can obtain the topic resources through ",(0,i.yg)("inlineCode",{parentName:"p"},"pulsar-admin")," tool, REST API and Java."),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"In REST API, ",(0,i.yg)("inlineCode",{parentName:"p"},":schema")," stands for persistent or non-persistent. ",(0,i.yg)("inlineCode",{parentName:"p"},":tenant"),", ",(0,i.yg)("inlineCode",{parentName:"p"},":namespace"),", ",(0,i.yg)("inlineCode",{parentName:"p"},":x")," are variables, replace them with the real tenant, namespace, and ",(0,i.yg)("inlineCode",{parentName:"p"},"x")," names when using them.\nTake ",(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getList"},"GET /admin/v2/:schema/:tenant/:namespace/getList")," as an example, to get the list of persistent topics in REST API, use ",(0,i.yg)("inlineCode",{parentName:"p"},"https://pulsar.apache.org/admin/v2/persistent/my-tenant/my-namespace"),". To get the list of non-persistent topics in REST API, use ",(0,i.yg)("inlineCode",{parentName:"p"},"https://pulsar.apache.org/admin/v2/non-persistent/my-tenant/my-namespace"),".")),(0,i.yg)("h3",{id:"list-of-topics"},"List of topics"),(0,i.yg)("p",null,"You can get the list of topics under a given namespace in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics list my-tenant/my-namespace\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getList"},"GET /admin/v2/:schema/:tenant/:namespace/getList"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String namespace = "my-tenant/my-namespace";\nadmin.topics().getList(namespace);\n')))),(0,i.yg)("h3",{id:"grant-permission"},"Grant permission"),(0,i.yg)("p",null,"You can grant permissions on a client role to perform specific actions on a given topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics grant-permission \\\n    --actions produce,consume \\\n    --role application1 \\\n    persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/grantPermissionsOnTopic"},"POST /admin/v2/:schema/:tenant/:namespace/:topic/permissions/:role/grantPermissionsOnTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nString role = "test-role";\nSet<AuthAction> actions  = Sets.newHashSet(AuthAction.produce, AuthAction.consume);\nadmin.topics().grantPermission(topic, role, actions);\n')))),(0,i.yg)("h3",{id:"get-permission"},"Get permission"),(0,i.yg)("p",null,"You can fetch permission in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics permissions persistent://test-tenant/ns1/tp1\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"application1    [consume, produce]\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getPermissionsOnTopic"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/permissions/getPermissionsOnTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().getPermissions(topic);\n')))),(0,i.yg)("h3",{id:"revoke-permission"},"Revoke permission"),(0,i.yg)("p",null,"You can revoke permissions granted on a client role in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics revoke-permission \\\n    --role application1 \\\n    persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/revokePermissionsOnTopic"},"DELETE /admin/v2/:schema/:tenant/:namespace/:topic/permissions/:role/revokePermissionsOnTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nString role = "test-role";\nadmin.topics().revokePermissions(topic, role);\n')))),(0,i.yg)("h3",{id:"delete-topic"},"Delete topic"),(0,i.yg)("p",null,"You can delete a topic in the following ways. You cannot delete a topic if any active subscription or producer is connected to the topic."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics delete persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/deleteTopic"},"DELETE /admin/v2/:schema/:tenant/:namespace/:topic/deleteTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().delete(topic);\n')))),(0,i.yg)("h3",{id:"unload-topic"},"Unload topic"),(0,i.yg)("p",null,"You can unload a topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics unload persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/unloadTopic"},"PUT /admin/v2/:schema/:tenant/:namespace/:topic/unload/unloadTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().unload(topic);\n')))),(0,i.yg)("h3",{id:"get-stats"},"Get stats"),(0,i.yg)("p",null,"For the detailed statistics of a topic, see ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/administration-stats#topic-stats"},"Pulsar statistics"),"."),(0,i.yg)("p",null,"The following is an example of a topic status."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "msgRateIn" : 0.0,\n  "msgThroughputIn" : 0.0,\n  "msgRateOut" : 0.0,\n  "msgThroughputOut" : 0.0,\n  "bytesInCounter" : 504,\n  "msgInCounter" : 9,\n  "bytesOutCounter" : 2296,\n  "msgOutCounter" : 41,\n  "averageMsgSize" : 0.0,\n  "msgChunkPublished" : false,\n  "storageSize" : 504,\n  "backlogSize" : 0,\n  "filteredEntriesCount" : 100,\n  "earliestMsgPublishTimeInBacklogs": 0,\n  "offloadedStorageSize" : 0,\n  "publishers" : [ {\n    "accessMode" : "Shared",\n    "msgRateIn" : 0.0,\n    "msgThroughputIn" : 0.0,\n    "averageMsgSize" : 0.0,\n    "chunkedMessageRate" : 0.0,\n    "producerId" : 0,\n    "metadata" : { },\n    "address" : "/127.0.0.1:65402",\n    "connectedSince" : "2021-06-09T17:22:55.913+08:00",\n    "clientVersion" : "2.9.0-SNAPSHOT",\n    "producerName" : "standalone-1-0"\n  } ],\n  "waitingPublishers" : 0,\n  "subscriptions" : {\n    "sub-demo" : {\n      "msgRateOut" : 0.0,\n      "msgThroughputOut" : 0.0,\n      "bytesOutCounter" : 2296,\n      "msgOutCounter" : 41,\n      "msgRateRedeliver" : 0.0,\n      "chunkedMessageRate" : 0,\n      "msgBacklog" : 0,\n      "backlogSize" : 0,\n      "earliestMsgPublishTimeInBacklog": 0,\n      "msgBacklogNoDelayed" : 0,\n      "blockedSubscriptionOnUnackedMsgs" : false,\n      "msgDelayed" : 0,\n      "unackedMessages" : 0,\n      "type" : "Exclusive",\n      "activeConsumerName" : "20b81",\n      "msgRateExpired" : 0.0,\n      "totalMsgExpired" : 0,\n      "lastExpireTimestamp" : 0,\n      "lastConsumedFlowTimestamp" : 1623230565356,\n      "lastConsumedTimestamp" : 1623230583946,\n      "lastAckedTimestamp" : 1623230584033,\n      "lastMarkDeleteAdvancedTimestamp" : 1623230584033,\n      "filterProcessedMsgCount": 100,\n      "filterAcceptedMsgCount": 100,\n      "filterRejectedMsgCount": 0,\n      "filterRescheduledMsgCount": 0,\n      "consumers" : [ {\n        "msgRateOut" : 0.0,\n        "msgThroughputOut" : 0.0,\n        "bytesOutCounter" : 2296,\n        "msgOutCounter" : 41,\n        "msgRateRedeliver" : 0.0,\n        "chunkedMessageRate" : 0.0,\n        "consumerName" : "20b81",\n        "availablePermits" : 959,\n        "unackedMessages" : 0,\n        "avgMessagesPerEntry" : 314,\n        "blockedConsumerOnUnackedMsgs" : false,\n        "lastAckedTimestamp" : 1623230584033,\n        "lastConsumedTimestamp" : 1623230583946,\n        "metadata" : { },\n        "address" : "/127.0.0.1:65172",\n        "connectedSince" : "2021-06-09T17:22:45.353+08:00",\n        "clientVersion" : "2.9.0-SNAPSHOT"\n      } ],\n      "allowOutOfOrderDelivery": false,\n      "consumersAfterMarkDeletePosition" : { },\n      "nonContiguousDeletedMessagesRanges" : 0,\n      "nonContiguousDeletedMessagesRangesSerializedSize" : 0,\n      "durable" : true,\n      "replicated" : false\n    }\n  },\n  "replication" : { },\n  "deduplicationStatus" : "Disabled",\n  "nonContiguousDeletedMessagesRanges" : 0,\n  "nonContiguousDeletedMessagesRangesSerializedSize" : 0,\n  "ownerBroker" : "localhost:8080"\n}\n')),(0,i.yg)("p",null,"To get the status of a topic, you can use the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics stats persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getStats"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/stats/getStats"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().getStats(topic);\n')))),(0,i.yg)("h3",{id:"get-internal-stats"},"Get internal stats"),(0,i.yg)("p",null,"For the detailed internal statistics inside a topic, see ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/administration-stats#topic-internal-stats"},"Pulsar statistics"),"."),(0,i.yg)("p",null,"The following is an example of the internal statistics of a topic."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "entriesAddedCounter":0,\n    "numberOfEntries":0,\n    "totalSize":0,\n    "currentLedgerEntries":0,\n    "currentLedgerSize":0,\n    "lastLedgerCreatedTimestamp":"2021-01-22T21:12:14.868+08:00",\n    "lastLedgerCreationFailureTimestamp":null,\n    "waitingCursorsCount":0,\n    "pendingAddEntriesCount":0,\n    "lastConfirmedEntry":"3:-1",\n    "state":"LedgerOpened",\n    "ledgers":[\n        {\n            "ledgerId":3,\n            "entries":0,\n            "size":0,\n            "offloaded":false,\n            "metadata":null\n        }\n    ],\n    "cursors":{\n        "test":{\n            "markDeletePosition":"3:-1",\n            "readPosition":"3:-1",\n            "waitingReadOp":false,\n            "pendingReadOps":0,\n            "messagesConsumedCounter":0,\n            "cursorLedger":4,\n            "cursorLedgerLastEntry":1,\n            "individuallyDeletedMessages":"[]",\n            "lastLedgerSwitchTimestamp":"2021-01-22T21:12:14.966+08:00",\n            "state":"Open",\n            "numberOfEntriesSinceFirstNotAckedMessage":0,\n            "totalNonContiguousDeletedMessagesRange":0,\n            "properties":{\n\n            }\n        }\n    },\n    "schemaLedgers":[\n        {\n            "ledgerId":1,\n            "entries":11,\n            "size":10,\n            "offloaded":false,\n            "metadata":null\n        }\n    ],\n    "compactedLedger":{\n        "ledgerId":-1,\n        "entries":-1,\n        "size":-1,\n        "offloaded":false,\n        "metadata":null\n    }\n}\n')),(0,i.yg)("p",null,"To get the internal status of a topic, you can use the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics stats-internal persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getInternalStats"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/internalStats/getInternalStats"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().getInternalStats(topic);\n')))),(0,i.yg)("h3",{id:"peek-messages"},"Peek messages"),(0,i.yg)("p",null,"You can peek a number of messages for a specific subscription of a given topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics peek-messages \\\n    --count 10 --subscription my-subscription \\\n    persistent://test-tenant/ns1/tp1\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"Message ID: 77:2\nPublish time: 1668674963028\nEvent time: 0\n         +-------------------------------------------------+\n         |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |\n+--------+-------------------------------------------------+----------------+\n|00000000| 68 65 6c 6c 6f 2d 31                            |hello-1         |\n+--------+-------------------------------------------------+----------------+\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/peekNthMessage"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/subscription/:subName/position/:messagePosition/peekNthMessage"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nString subName = "my-subscription";\nint numMessages = 1;\nadmin.topics().peekMessages(topic, subName, numMessages);\n')))),(0,i.yg)("h3",{id:"get-message-by-id"},"Get message by ID"),(0,i.yg)("p",null,"You can fetch the message with the given ledger ID and entry ID in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics get-message-by-id \\\n    -l 10 -e 0 persistent://public/default/my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getMessageById"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/ledger/:ledgerId/entry/:entryId/getMessageById"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nlong ledgerId = 10;\nlong entryId = 10;\nadmin.topics().getMessageById(topic, ledgerId, entryId);\n')))),(0,i.yg)("h3",{id:"examine-messages"},"Examine messages"),(0,i.yg)("p",null,"You can examine a specific message on a topic by position relative to the earliest or the latest message."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics examine-messages \\\n    -i latest -m 1 persistent://public/default/my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/examineMessage"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/examinemessage?initialPosition=:initialPosition&messagePosition=:messagePosition/examineMessage"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().examineMessage(topic, "latest", 1);\n')))),(0,i.yg)("h3",{id:"get-message-id"},"Get message ID"),(0,i.yg)("p",null,"You can get message ID published at or just after the given datetime."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics get-message-id \\\n    persistent://public/default/my-topic \\\n    -d 2021-06-28T19:01:17Z\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getMessageIdByTimestamp"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/messageid/:timestamp/getMessageIdByTimestamp"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nlong timestamp = System.currentTimeMillis()\nadmin.topics().getMessageIdByTimestamp(topic, timestamp);\n')))),(0,i.yg)("h3",{id:"skip-messages"},"Skip messages"),(0,i.yg)("p",null,"You can skip a number of messages for a specific subscription of a given topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics skip \\\n    --count 10 --subscription my-subscription \\\n    persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/skipMessages"},"POST /admin/v2/:schema/:tenant/:namespace/:topic/subscription/:subName/skip/:numMessages/skipMessages"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nString subName = "my-subscription";\nint numMessages = 1;\nadmin.topics().skipMessages(topic, subName, numMessages);\n')))),(0,i.yg)("h3",{id:"skip-all-messages"},"Skip all messages"),(0,i.yg)("p",null,"You can skip all the old messages for a specific subscription of a given topic."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics clear-backlog \\\n    --subscription my-subscription \\\n    persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/skipAllMessages"},"POST /admin/v2/:schema/:tenant/:namespace/:topic/subscription/:subName/skip_all/skipAllMessages"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nString subName = "my-subscription";\nadmin.topics().skipAllMessages(topic, subName);\n')))),(0,i.yg)("h3",{id:"reset-cursor"},"Reset cursor"),(0,i.yg)("p",null,"You can reset a subscription cursor position back to the position which is recorded X minutes before. It essentially calculates the time and position of the cursor at X minutes before and resets it at that position. You can reset the cursor in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics reset-cursor \\\n    --subscription my-subscription --time 10 \\\n    persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/resetCursor"},"POST /admin/v2/:schema/:tenant/:namespace/:topic/subscription/:subName/resetcursor/:timestamp/resetCursor"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'\nString topic = "persistent://my-tenant/my-namespace/my-topic";\nString subName = "my-subscription";\nlong timestamp = 2342343L;\nadmin.topics().resetCursor(topic, subName, timestamp);\n\n')))),(0,i.yg)("h3",{id:"look-up-topics-owner-broker"},"Look up topic's owner broker"),(0,i.yg)("p",null,"You can locate the owner broker of the given topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics lookup persistent://test-tenant/ns1/tp1\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},'"pulsar://broker1.org.com:4480"\n'))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/lookupTopicAsync"},"GET /lookup/v2/topic/:topic-domain/:tenant/:namespace/:topic/lookupTopicAsync"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.lookups().lookupDestination(topic);\n')))),(0,i.yg)("h3",{id:"look-up-partitioned-topics-owner-broker"},"Look up partitioned topic's owner broker"),(0,i.yg)("p",null,"You can locate the owner broker of the given partitioned topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics partitioned-lookup persistent://test-tenant/ns1/my-topic\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},'"persistent://test-tenant/ns1/my-topic-partition-0   pulsar://localhost:6650"\n"persistent://test-tenant/ns1/my-topic-partition-1   pulsar://localhost:6650"\n"persistent://test-tenant/ns1/my-topic-partition-2   pulsar://localhost:6650"\n"persistent://test-tenant/ns1/my-topic-partition-3   pulsar://localhost:6650"\n')),(0,i.yg)("p",null,"Lookup the partitioned topics sorted by broker URL"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics partitioned-lookup \\\n    persistent://test-tenant/ns1/my-topic --sort-by-broker\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"pulsar://localhost:6650   [persistent://test-tenant/ns1/my-topic-partition-0, persistent://test-tenant/ns1/my-topic-partition-1, persistent://test-tenant/ns1/my-topic-partition-2, persistent://test-tenant/ns1/my-topic-partition-3]\n"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.lookups().lookupPartitionedTopic(topic);\n')))),(0,i.yg)("h3",{id:"get-bundle"},"Get bundle"),(0,i.yg)("p",null,"You can get the range of the bundle that the given topic belongs to in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics bundle-range persistent://test-tenant/ns1/tp1\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},'"0x00000000_0xffffffff"\n'))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getNamespaceBundle"},"GET /lookup/v2/topic/:topic_domain/:tenant/:namespace/:topic/bundle/getNamespaceBundle"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.lookups().getBundleRange(topic);\n')))),(0,i.yg)("h3",{id:"get-subscriptions"},"Get subscriptions"),(0,i.yg)("p",null,"You can check all subscription names for a given topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics subscriptions persistent://test-tenant/ns1/tp1\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"my-subscription\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getSubscriptions"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/subscriptions/getSubscriptions"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().getSubscriptions(topic);\n')))),(0,i.yg)("h3",{id:"last-message-id"},"Last Message Id"),(0,i.yg)("p",null,"You can get the last committed message ID for a persistent topic. It is available since 2.3.0 release."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics last-message-id topic-name\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "ledgerId" : 97,\n  "entryId" : 9,\n  "partitionIndex" : -1\n}\n'))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getLastMessageId"},"Get /admin/v2/:schema/:tenant/:namespace/:topic/lastMessageId/getLastMessageId"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().getLastMessage(topic);\n')))),(0,i.yg)("h3",{id:"get-backlog-size"},"Get backlog size"),(0,i.yg)("p",null,"You can get the backlog size of a single partition topic or a non-partitioned topic with a given message ID (in bytes)."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics get-backlog-size \\\n  -m 1:1 \\\n  persistent://test-tenant/ns1/tp1-partition-0\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getBacklogSizeByMessageId"},"PUT /admin/v2/:schema/:tenant/:namespace/:topic/backlogSize/getBacklogSizeByMessageId"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nMessageId messageId = MessageId.earliest;\nadmin.topics().getBacklogSizeByMessageId(topic, messageId);\n')))),(0,i.yg)("h3",{id:"configure-deduplication-snapshot-interval"},"Configure deduplication snapshot interval"),(0,i.yg)("h4",{id:"get-deduplication-snapshot-interval"},"Get deduplication snapshot interval"),(0,i.yg)("p",null,"To get the topic-level deduplication snapshot interval, use one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics get-deduplication-snapshot-interval my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getDeduplicationSnapshotInterval"},"GET /admin/v2/topics/:tenant/:namespace/:topic/deduplicationSnapshotInterval/getDeduplicationSnapshotInterval"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getDeduplicationSnapshotInterval(topic)\n")))),(0,i.yg)("h4",{id:"set-deduplication-snapshot-interval"},"Set deduplication snapshot interval"),(0,i.yg)("p",null,"To set the topic-level deduplication snapshot interval, use one of the following methods."),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},(0,i.yg)("strong",{parentName:"p"},"Prerequisite")," ",(0,i.yg)("inlineCode",{parentName:"p"},"brokerDeduplicationEnabled")," must be set to ",(0,i.yg)("inlineCode",{parentName:"p"},"true"),".")),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics set-deduplication-snapshot-interval my-topic -i 1000\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/setDeduplicationSnapshotInterval"},"POST /admin/v2/topics/:tenant/:namespace/:topic/deduplicationSnapshotInterval/setDeduplicationSnapshotInterval")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "interval": 1000\n}\n'))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().setDeduplicationSnapshotInterval(topic, 1000)\n")))),(0,i.yg)("h4",{id:"remove-deduplication-snapshot-interval"},"Remove deduplication snapshot interval"),(0,i.yg)("p",null,"To remove the topic-level deduplication snapshot interval, use one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics remove-deduplication-snapshot-interval my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/deleteDeduplicationSnapshotInterval"},"DELETE /admin/v2/topics/:tenant/:namespace/:topic/deduplicationSnapshotInterval/deleteDeduplicationSnapshotInterval"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().removeDeduplicationSnapshotInterval(topic)\n")))),(0,i.yg)("h3",{id:"configure-inactive-topic-policies"},"Configure inactive topic policies"),(0,i.yg)("h4",{id:"get-inactive-topic-policies"},"Get inactive topic policies"),(0,i.yg)("p",null,"To get the topic-level inactive topic policies, use one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics get-inactive-topic-policies my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getInactiveTopicPolicies"},"GET /admin/v2/topics/:tenant/:namespace/:topic/inactiveTopicPolicies/getInactiveTopicPolicies"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getInactiveTopicPolicies(topic)\n")))),(0,i.yg)("h4",{id:"set-inactive-topic-policies"},"Set inactive topic policies"),(0,i.yg)("p",null,"To set the topic-level inactive topic policies, use one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics set-inactive-topic-policies my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/setInactiveTopicPolicies"},"POST /admin/v2/topics/:tenant/:namespace/:topic/inactiveTopicPolicies/setInactiveTopicPolicies"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().setInactiveTopicPolicies(topic, inactiveTopicPolicies)\n")))),(0,i.yg)("h4",{id:"remove-inactive-topic-policies"},"Remove inactive topic policies"),(0,i.yg)("p",null,"To remove the topic-level inactive topic policies, use one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics remove-inactive-topic-policies my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/removeInactiveTopicPolicies"},"DELETE /admin/v2/topics/:tenant/:namespace/:topic/inactiveTopicPolicies/removeInactiveTopicPolicies"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().removeInactiveTopicPolicies(topic)\n")))),(0,i.yg)("h3",{id:"configure-offload-policies"},"Configure offload policies"),(0,i.yg)("h4",{id:"get-offload-policies"},"Get offload policies"),(0,i.yg)("p",null,"To get the topic-level offload policies, use one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics get-offload-policies my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getOffloadPolicies"},"GET /admin/v2/topics/:tenant/:namespace/:topic/offloadPolicies/getOffloadPolicies"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getOffloadPolicies(topic)\n")))),(0,i.yg)("h4",{id:"set-offload-policies"},"Set offload policies"),(0,i.yg)("p",null,"To set the topic-level offload policies, use one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics set-offload-policies my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/setOffloadPolicies"},"POST /admin/v2/topics/:tenant/:namespace/:topic/offloadPolicies/setOffloadPolicies"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().setOffloadPolicies(topic, offloadPolicies)\n")))),(0,i.yg)("h4",{id:"remove-offload-policies"},"Remove offload policies"),(0,i.yg)("p",null,"To remove the topic-level offload policies, use one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics remove-offload-policies my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/removeOffloadPolicies"},"DELETE /admin/v2/topics/:tenant/:namespace/:topic/offloadPolicies/removeOffloadPolicies"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().removeOffloadPolicies(topic)\n")))),(0,i.yg)("h2",{id:"manage-non-partitioned-topics"},"Manage non-partitioned topics"),(0,i.yg)("p",null,"You can use Pulsar ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/admin-api-overview"},"admin API")," to create, delete and check the status of non-partitioned topics."),(0,i.yg)("h3",{id:"create"},"Create"),(0,i.yg)("p",null,"Non-partitioned topics must be explicitly created. When creating a new non-partitioned topic, you need to provide a name for the topic."),(0,i.yg)("p",null,"By default, 60 seconds after creation, topics are considered inactive and deleted automatically to avoid generating trash data. To disable this feature, set ",(0,i.yg)("inlineCode",{parentName:"p"},"brokerDeleteInactiveTopicsEnabled")," to ",(0,i.yg)("inlineCode",{parentName:"p"},"false"),". To change the frequency of checking inactive topics, set ",(0,i.yg)("inlineCode",{parentName:"p"},"brokerDeleteInactiveTopicsFrequencySeconds")," to a specific value."),(0,i.yg)("p",null,"For more information about the two parameters, see ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/reference-configuration#broker"},"here"),"."),(0,i.yg)("p",null,"You can create non-partitioned topics in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("p",null,"When you create non-partitioned topics with the ",(0,i.yg)("a",{parentName:"p",href:"pathname:///reference/#/next/pulsar-admin/topics?id=create"},(0,i.yg)("inlineCode",{parentName:"a"},"create"))," command, you need to specify the topic name as an argument."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics create \\\n    persistent://my-tenant/my-namespace/my-topic\n")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"When you create a non-partitioned topic with the suffix '-partition-' followed by numeric value like 'xyz-topic-partition-x' for the topic name, if a partitioned topic with same suffix 'xyz-topic-partition-y' exists, then the numeric value(x) for the non-partitioned topic must be larger than the number of partitions(y) of the partitioned topic. Otherwise, you cannot create such a non-partitioned topic."))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/createNonPartitionedTopic"},"PUT /admin/v2/:schema/:tenant/:namespace/:topic/createNonPartitionedTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topicName = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().createNonPartitionedTopic(topicName);\n')))),(0,i.yg)("h3",{id:"delete"},"Delete"),(0,i.yg)("p",null,"You can delete non-partitioned topics in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics delete \\\n    persistent://my-tenant/my-namespace/my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/deleteTopic"},"DELETE /admin/v2/:schema/:tenant/:namespace/:topic/deleteTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().delete(topic);\n")))),(0,i.yg)("h3",{id:"list"},"List"),(0,i.yg)("p",null,"You can get the list of topics under a given namespace in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics list tenant/namespace\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"persistent://tenant/namespace/topic1\npersistent://tenant/namespace/topic2\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getList"},"GET /admin/v2/:schema/:tenant/:namespace/getList"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getList(namespace);\n")))),(0,i.yg)("h3",{id:"stats"},"Stats"),(0,i.yg)("p",null,"You can check the current statistics of a given topic and its connected producers and consumers in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics stats \\\n    persistent://test-tenant/namespace/topic \\\n    --get-precise-backlog\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getStats"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/stats/getStats"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getStats(topic, false /* is precise backlog */);\n")))),(0,i.yg)("p",null,"The following is an example. For the description of topic stats, see ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/administration-stats#topic-stats"},"Pulsar statistics"),"."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "msgRateIn": 4641.528542257553,\n  "msgThroughputIn": 44663039.74947473,\n  "msgRateOut": 0,\n  "msgThroughputOut": 0,\n  "averageMsgSize": 1232439.816728665,\n  "storageSize": 135532389160,\n  "publishers": [\n    {\n      "msgRateIn": 57.855383881403576,\n      "msgThroughputIn": 558994.7078932219,\n      "averageMsgSize": 613135,\n      "producerId": 0,\n      "producerName": null,\n      "address": null,\n      "connectedSince": null\n    }\n  ],\n  "subscriptions": {\n    "my-topic_subscription": {\n      "msgRateOut": 0,\n      "msgThroughputOut": 0,\n      "msgBacklog": 116632,\n      "type": null,\n      "msgRateExpired": 36.98245516804671,\n      "consumers": []\n    }\n  },\n  "replication": {}\n}\n')),(0,i.yg)("h3",{id:"internal-stats"},"Internal stats"),(0,i.yg)("p",null,"You can check the detailed statistics of a topic. The following is an example. For the description of each internal topic stats, see ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/administration-stats#topic-internal-stats"},"Pulsar statistics"),"."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "entriesAddedCounter": 20449518,\n  "numberOfEntries": 3233,\n  "totalSize": 331482,\n  "currentLedgerEntries": 3233,\n  "currentLedgerSize": 331482,\n  "lastLedgerCreatedTimestamp": "2016-06-29 03:00:23.825",\n  "lastLedgerCreationFailureTimestamp": null,\n  "waitingCursorsCount": 1,\n  "pendingAddEntriesCount": 0,\n  "lastConfirmedEntry": "324711539:3232",\n  "state": "LedgerOpened",\n  "ledgers": [\n    {\n      "ledgerId": 324711539,\n      "entries": 0,\n      "size": 0\n    }\n  ],\n  "cursors": {\n    "my-subscription": {\n      "markDeletePosition": "324711539:3133",\n      "readPosition": "324711539:3233",\n      "waitingReadOp": true,\n      "pendingReadOps": 0,\n      "messagesConsumedCounter": 20449501,\n      "cursorLedger": 324702104,\n      "cursorLedgerLastEntry": 21,\n      "individuallyDeletedMessages": "[(324711539:3134\u2025324711539:3136], (324711539:3137\u2025324711539:3140], ]",\n      "lastLedgerSwitchTimestamp": "2016-06-29 01:30:19.313",\n      "state": "Open"\n    }\n  }\n}\n')),(0,i.yg)("p",null,"You can get the internal stats for the partitioned topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics stats-internal \\\n    persistent://test-tenant/namespace/topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getInternalStats"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/internalStats/getInternalStats"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getInternalStats(topic);\n")))),(0,i.yg)("h2",{id:"manage-partitioned-topics"},"Manage partitioned topics"),(0,i.yg)("p",null,"You can use Pulsar ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/admin-api-overview"},"admin API")," to create, update, delete and check the status of partitioned topics."),(0,i.yg)("h3",{id:"create-1"},"Create"),(0,i.yg)("p",null,"When creating a new partitioned topic, you need to provide a name and the number of partitions for the topic."),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"By default, if there are no messages 60 seconds after creation, topics are considered inactive and deleted automatically to avoid generating trash data. To disable this feature, set ",(0,i.yg)("inlineCode",{parentName:"p"},"brokerDeleteInactiveTopicsEnabled")," to ",(0,i.yg)("inlineCode",{parentName:"p"},"false"),". To change the frequency of checking inactive topics, set ",(0,i.yg)("inlineCode",{parentName:"p"},"brokerDeleteInactiveTopicsFrequencySeconds")," to a specific value.")),(0,i.yg)("p",null,"For more information about the two parameters, see ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/reference-configuration#broker"},"here"),"."),(0,i.yg)("p",null,"You can create partitioned topics in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("p",null,"When you create partitioned topics with the ",(0,i.yg)("a",{parentName:"p",href:"pathname:///reference/#/next/pulsar-admin/topics?id=create-partitioned-topic"},(0,i.yg)("inlineCode",{parentName:"a"},"create-partitioned-topic"))," command, you need to specify the topic name as an argument and the number of partitions using the ",(0,i.yg)("inlineCode",{parentName:"p"},"-p")," or ",(0,i.yg)("inlineCode",{parentName:"p"},"--partitions")," flag."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics create-partitioned-topic \\\n    persistent://my-tenant/my-namespace/my-topic \\\n    --partitions 4\n")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"If a non-partitioned topic with the suffix '-partition-' followed by a numeric value like 'xyz-topic-partition-10', you can not create a partitioned topic with name 'xyz-topic', because the partitions of the partitioned topic could override the existing non-partitioned topic. To create such partitioned topic, you have to delete that non-partitioned topic first."))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/createPartitionedTopic"},"PUT /admin/v2/:schema/:tenant/:namespace/:topic/partitions/createPartitionedTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topicName = "persistent://my-tenant/my-namespace/my-topic";\nint numPartitions = 4;\nadmin.topics().createPartitionedTopic(topicName, numPartitions);\n')))),(0,i.yg)("h3",{id:"create-missed-partitions"},"Create missed partitions"),(0,i.yg)("p",null,"When topic auto-creation is disabled, and you have a partitioned topic without any partitions, you can use the ",(0,i.yg)("a",{parentName:"p",href:"pathname:///reference/#/next/pulsar-admin/topics?id=create-missed-partitions"},(0,i.yg)("inlineCode",{parentName:"a"},"create-missed-partitions"))," command to create partitions for the topic."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("p",null,"You can create missed partitions with the ",(0,i.yg)("a",{parentName:"p",href:"pathname:///reference/#/next/pulsar-admin/topics?id=create-missed-partitions"},(0,i.yg)("inlineCode",{parentName:"a"},"create-missed-partitions"))," command and specify the topic name as an argument."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics create-missed-partitions \\\n    persistent://my-tenant/my-namespace/my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/createMissedPartitions"},"POST /admin/v2/:schema/:tenant/:namespace/:topic/createMissedPartitions"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topicName = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().createMissedPartitions(topicName);\n')))),(0,i.yg)("h3",{id:"get-metadata"},"Get metadata"),(0,i.yg)("p",null,"Partitioned topics are associated with metadata, you can view it as a JSON object. The following metadata field is available."),(0,i.yg)("table",null,(0,i.yg)("thead",{parentName:"table"},(0,i.yg)("tr",{parentName:"thead"},(0,i.yg)("th",{parentName:"tr",align:"left"},"Field"),(0,i.yg)("th",{parentName:"tr",align:"left"},"Description"))),(0,i.yg)("tbody",{parentName:"table"},(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"left"},(0,i.yg)("inlineCode",{parentName:"td"},"partitions")),(0,i.yg)("td",{parentName:"tr",align:"left"},"The number of partitions into which the topic is divided.")))),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("p",null,"You can check the number of partitions in a partitioned topic with the ",(0,i.yg)("a",{parentName:"p",href:"pathname:///reference/#/next/pulsar-admin/topics?id=get-partitioned-topic-metadata"},(0,i.yg)("inlineCode",{parentName:"a"},"get-partitioned-topic-metadata"))," subcommand."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics get-partitioned-topic-metadata \\\n    persistent://my-tenant/my-namespace/my-topic\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "partitions" : 4,\n  "deleted" : false\n}\n'))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getPartitionedMetadata"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/partitions/getPartitionedMetadata"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topicName = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().getPartitionedTopicMetadata(topicName);\n')))),(0,i.yg)("h3",{id:"update"},"Update"),(0,i.yg)("p",null,"You can update the number of partitions for an existing partitioned topic. However, you can only increase the number of partitions. Decrementing the number of partitions would delete the topic, which is not supported in Pulsar."),(0,i.yg)("p",null,"Producers and consumers can find the newly created partitions automatically."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("p",null,"You can update partitioned topics with the ",(0,i.yg)("a",{parentName:"p",href:"pathname:///reference/#/next/pulsar-admin/topics?id=update-partitioned-topic"},(0,i.yg)("inlineCode",{parentName:"a"},"update-partitioned-topic"))," command."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics update-partitioned-topic \\\n    persistent://my-tenant/my-namespace/my-topic \\\n    --partitions 8\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/updatePartitionedTopic"},"POST /admin/v2/:schema/:tenant/:cluster/:namespace/:destination/partitions/updatePartitionedTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().updatePartitionedTopic(topic, numPartitions);\n")))),(0,i.yg)("h3",{id:"delete-1"},"Delete"),(0,i.yg)("p",null,"You can delete partitioned topics with the ",(0,i.yg)("a",{parentName:"p",href:"pathname:///reference/#/next/pulsar-admin/topics?id=delete-partitioned-topic"},(0,i.yg)("inlineCode",{parentName:"a"},"delete-partitioned-topic"))," command, REST API and Java."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics delete-partitioned-topic \\\n    persistent://my-tenant/my-namespace/my-topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/deletePartitionedTopic"},"DELETE /admin/v2/:schema/:topic/:namespace/:destination/partitions/deletePartitionedTopic"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().deletePartitionedTopic(topic);\n")))),(0,i.yg)("h3",{id:"list-1"},"List"),(0,i.yg)("p",null,"You can get the list of partitioned topics under a given namespace in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics list-partitioned-topics tenant/namespace\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"persistent://tenant/namespace/topic1\npersistent://tenant/namespace/topic2\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getPartitionedTopicList"},"GET /admin/v2/:schema/:tenant/:namespace/getPartitionedTopicList"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getPartitionedTopicList(namespace);\n")))),(0,i.yg)("h3",{id:"stats-1"},"Stats"),(0,i.yg)("p",null,"You can check the current statistics of a given partitioned topic and its connected producers and consumers in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics partitioned-stats \\\n    persistent://test-tenant/namespace/topic \\\n    --per-partition\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getPartitionedStats"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/partitioned-stats/getPartitionedStats"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getPartitionedStats(topic, true /* per partition */, false /* is precise backlog */);\n")))),(0,i.yg)("p",null,"The following is an example. For the description of each topic stats, see ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/administration-stats#topic-stats"},"Pulsar statistics"),"."),(0,i.yg)("p",null,"Note that in the subscription JSON object, ",(0,i.yg)("inlineCode",{parentName:"p"},"chuckedMessageRate")," is deprecated. Please use ",(0,i.yg)("inlineCode",{parentName:"p"},"chunkedMessageRate"),". Both will be sent in the JSON for now."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "msgRateIn" : 999.992947159793,\n  "msgThroughputIn" : 1070918.4635439808,\n  "msgRateOut" : 0.0,\n  "msgThroughputOut" : 0.0,\n  "bytesInCounter" : 270318763,\n  "msgInCounter" : 252489,\n  "bytesOutCounter" : 0,\n  "msgOutCounter" : 0,\n  "averageMsgSize" : 1070.926056966454,\n  "msgChunkPublished" : false,\n  "storageSize" : 270316646,\n  "backlogSize" : 200921133,\n  "publishers" : [ {\n    "msgRateIn" : 999.992947159793,\n    "msgThroughputIn" : 1070918.4635439808,\n    "averageMsgSize" : 1070.3333333333333,\n    "chunkedMessageRate" : 0.0,\n    "producerId" : 0\n  } ],\n  "subscriptions" : {\n    "test" : {\n      "msgRateOut" : 0.0,\n      "msgThroughputOut" : 0.0,\n      "bytesOutCounter" : 0,\n      "msgOutCounter" : 0,\n      "msgRateRedeliver" : 0.0,\n      "chuckedMessageRate" : 0,\n      "chunkedMessageRate" : 0,\n      "msgBacklog" : 144318,\n      "msgBacklogNoDelayed" : 144318,\n      "blockedSubscriptionOnUnackedMsgs" : false,\n      "msgDelayed" : 0,\n      "unackedMessages" : 0,\n      "msgRateExpired" : 0.0,\n      "lastExpireTimestamp" : 0,\n      "lastConsumedFlowTimestamp" : 0,\n      "lastConsumedTimestamp" : 0,\n      "lastAckedTimestamp" : 0,\n      "consumers" : [ ],\n      "isDurable" : true,\n      "isReplicated" : false\n    }\n  },\n  "replication" : { },\n  "metadata" : {\n    "partitions" : 3\n  },\n  "partitions" : { }\n}\n')),(0,i.yg)("h3",{id:"internal-stats-1"},"Internal stats"),(0,i.yg)("p",null,"You can check the detailed statistics of a partitioned topic. The following is an example. For the description of each internal topic stats, see ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/administration-stats#topic-internal-stats"},"Pulsar statistics"),"."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "entriesAddedCounter": 20449518,\n  "numberOfEntries": 3233,\n  "totalSize": 331482,\n  "currentLedgerEntries": 3233,\n  "currentLedgerSize": 331482,\n  "lastLedgerCreatedTimestamp": "2016-06-29 03:00:23.825",\n  "lastLedgerCreationFailureTimestamp": null,\n  "waitingCursorsCount": 1,\n  "pendingAddEntriesCount": 0,\n  "lastConfirmedEntry": "324711539:3232",\n  "state": "LedgerOpened",\n  "ledgers": [\n    {\n      "ledgerId": 324711539,\n      "entries": 0,\n      "size": 0\n    }\n  ],\n  "cursors": {\n    "my-subscription": {\n      "markDeletePosition": "324711539:3133",\n      "readPosition": "324711539:3233",\n      "waitingReadOp": true,\n      "pendingReadOps": 0,\n      "messagesConsumedCounter": 20449501,\n      "cursorLedger": 324702104,\n      "cursorLedgerLastEntry": 21,\n      "individuallyDeletedMessages": "[(324711539:3134\u2025324711539:3136], (324711539:3137\u2025324711539:3140], ]",\n      "lastLedgerSwitchTimestamp": "2016-06-29 01:30:19.313",\n      "state": "Open"\n    }\n  }\n}\n')),(0,i.yg)("p",null,"You can get the internal stats for the partitioned topic in the following ways."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics partitioned-stats-internal \\\n    persistent://test-tenant/namespace/topic\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getPartitionedInternalStats"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/partitioned-internalStats/getPartitionedInternalStats"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},"admin.topics().getPartitionedInternalStats(topic);\n")))),(0,i.yg)("h2",{id:"manage-subscriptions"},"Manage subscriptions"),(0,i.yg)("p",null,"You can use ",(0,i.yg)("a",{parentName:"p",href:"/docs/next/admin-api-overview"},"Pulsar admin API")," to create, check, and delete subscriptions."),(0,i.yg)("h3",{id:"create-subscription"},"Create subscription"),(0,i.yg)("p",null,"You can create a subscription for a topic using one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics create-subscription \\\n    --subscription my-subscription \\\n    persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/createSubscriptions"},"PUT /admin/v2/persistent/:tenant/:namespace/:topic/subscription/:subscription/createSubscriptions"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nString subscriptionName = "my-subscription";\nadmin.topics().createSubscription(topic, subscriptionName, MessageId.latest);\n')))),(0,i.yg)("h3",{id:"get-subscription"},"Get subscription"),(0,i.yg)("p",null,"You can check all subscription names for a given topic using one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics subscriptions persistent://test-tenant/ns1/tp1\n")),(0,i.yg)("p",null,"Example output:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"my-subscription\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/getSubscriptions"},"GET /admin/v2/:schema/:tenant/:namespace/:topic/subscriptions/getSubscriptions"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nadmin.topics().getSubscriptions(topic);\n')))),(0,i.yg)("h3",{id:"unsubscribe-subscription"},"Unsubscribe subscription"),(0,i.yg)("p",null,"When a subscription does not process messages anymore, you can unsubscribe it using one of the following methods."),(0,i.yg)(s.A,{groupId:"api-choice",defaultValue:"pulsar-admin",values:[{label:"pulsar-admin",value:"pulsar-admin"},{label:"REST API",value:"REST API"},{label:"Java",value:"Java"}],mdxType:"Tabs"},(0,i.yg)(l.A,{value:"pulsar-admin",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-shell"},"pulsar-admin topics unsubscribe \\\n    --subscription my-subscription \\\n    persistent://test-tenant/ns1/tp1\n"))),(0,i.yg)(l.A,{value:"REST API",mdxType:"TabItem"},(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://pulsar.apache.org/admin-rest-api?version=4.0.0&apiversion=v2#operation/deleteSubscription"},"DELETE /admin/v2/namespaces/:tenant/:namespace/:topic/subscription/:subscription/deleteSubscription"))),(0,i.yg)(l.A,{value:"Java",mdxType:"TabItem"},(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-java"},'String topic = "persistent://my-tenant/my-namespace/my-topic";\nString subscriptionName = "my-subscription";\nadmin.topics().deleteSubscription(topic, subscriptionName);\n')))))}g.isMDXComponent=!0}}]);