"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[70660],{15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>f});var r=t(96540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),s=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(l.Provider,{value:n},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=s(t),m=a,f=u["".concat(l,".").concat(m)]||u[m]||g[m]||i;return t?r.createElement(f,o(o({ref:n},p),{},{components:t})):r.createElement(f,o({ref:n},p))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=m;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c[u]="string"==typeof e?e:a,o[1]=c;for(var s=2;s<i;s++)o[s]=t[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},32802:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>c,toc:()=>s});var r=t(58168),a=(t(96540),t(15680));const i={id:"functions-deploy-trigger",title:"Trigger a function",sidebar_label:"Trigger a function",description:"Learn to trigger a function in Pulsar."},o=void 0,c={unversionedId:"functions-deploy-trigger",id:"version-4.0.x/functions-deploy-trigger",title:"Trigger a function",description:"Learn to trigger a function in Pulsar.",source:"@site/versioned_docs/version-4.0.x/functions-deploy-trigger.md",sourceDirName:".",slug:"/functions-deploy-trigger",permalink:"/docs/4.0.x/functions-deploy-trigger",draft:!1,editUrl:"https://github.com/apache/pulsar-site/edit/main/versioned_docs/version-4.0.x/functions-deploy-trigger.md",tags:[],version:"4.0.x",frontMatter:{id:"functions-deploy-trigger",title:"Trigger a function",sidebar_label:"Trigger a function",description:"Learn to trigger a function in Pulsar."},sidebar:"docsSidebar",previous:{title:"Use built-in functions",permalink:"/docs/4.0.x/functions-deploy-cluster-builtin"},next:{title:"How to develop",permalink:"/docs/4.0.x/functions-develop"}},l={},s=[],p={toc:s},u="wrapper";function g(e){let{components:n,...t}=e;return(0,a.yg)(u,(0,r.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"Triggering a function means that you invoke a function by producing a message to one of the input topics via the CLI. You can use the ",(0,a.yg)("inlineCode",{parentName:"p"},"trigger")," command to trigger a function at any time."),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"With the ",(0,a.yg)("a",{parentName:"p",href:"pathname:///reference/#/4.0.x/pulsar-admin/"},(0,a.yg)("inlineCode",{parentName:"a"},"pulsar-admin"))," CLI, you can send messages to functions without using the ",(0,a.yg)("a",{parentName:"p",href:"/docs/4.0.x/reference-cli-tools"},(0,a.yg)("inlineCode",{parentName:"a"},"pulsar-client"))," tool or a language-specific client library.")),(0,a.yg)("p",null,"To learn how to trigger a function, you can start with a Python function that returns a simple string based on the input as follows."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'# myfunc.py\ndef process(input):\n    return "This function has been triggered with a value of {0}".format(input)\n')),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Run the function in cluster mode."),(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"bin/pulsar-admin functions create \\\n  --tenant public \\\n  --namespace default \\\n  --name myfunc \\\n  --py myfunc.py \\\n  --classname myfunc \\\n  --inputs persistent://public/default/in \\\n  --output persistent://public/default/out\n"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Assign a consumer to listen on the output topic for messages from the ",(0,a.yg)("inlineCode",{parentName:"p"},"myfunc")," function with the ",(0,a.yg)("a",{parentName:"p",href:"/docs/4.0.x/reference-cli-tools"},(0,a.yg)("inlineCode",{parentName:"a"},"pulsar-client consume"))," command."),(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"bin/pulsar-client consume persistent://public/default/out \\\n  --subscription-name my-subscription \\\n  --num-messages 0 # Listen indefinitely\n"))),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"Trigger the function."),(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre",className:"language-bash"},'bin/pulsar-admin functions trigger \\\n  --tenant public \\\n  --namespace default \\\n  --name myfunc \\\n  --trigger-value "hello world"\n')),(0,a.yg)("admonition",{parentName:"li",type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"In the ",(0,a.yg)("inlineCode",{parentName:"p"},"trigger")," command, topic info is not required. You only need to specify basic information about the function, such as tenant, namespace, and function name.")))),(0,a.yg)("p",null,"The consumer listening on the output topic produces something as follows in the log."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-text"},"----- got message -----\nThis function has been triggered with a value of hello world\n")))}g.isMDXComponent=!0}}]);