"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[87995],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>k});var r=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var u=r.createContext({}),o=function(e){var t=r.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):n(n({},t),e)),a},s=function(e){var t=o(e.components);return r.createElement(u.Provider,{value:t},e.children)},h="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,i=e.mdxType,l=e.originalType,u=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),h=o(a),m=i,k=h["".concat(u,".").concat(m)]||h[m]||c[m]||l;return a?r.createElement(k,n(n({ref:t},s),{},{components:a})):r.createElement(k,n({ref:t},s))}));function k(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=a.length,n=new Array(l);n[0]=m;var p={};for(var u in t)hasOwnProperty.call(t,u)&&(p[u]=t[u]);p.originalType=e,p[h]="string"==typeof e?e:i,n[1]=p;for(var o=2;o<l;o++)n[o]=a[o];return r.createElement.apply(null,n)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},85180:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>n,default:()=>c,frontMatter:()=>l,metadata:()=>p,toc:()=>o});var r=a(87462),i=(a(67294),a(3905));const l={id:"pulsar-3.1.2",title:"Apache Pulsar 3.1.2",sidebar_label:"Apache Pulsar 3.1.2"},n=void 0,p={unversionedId:"versioned/pulsar-3.1.2",id:"versioned/pulsar-3.1.2",title:"Apache Pulsar 3.1.2",description:"2024-01-02",source:"@site/release-notes/versioned/pulsar-3.1.2.md",sourceDirName:"versioned",slug:"/versioned/pulsar-3.1.2",permalink:"/release-notes/versioned/pulsar-3.1.2",draft:!1,editUrl:"https://github.com/apache/pulsar-site/edit/main/release-notes/versioned/pulsar-3.1.2.md",tags:[],version:"current",frontMatter:{id:"pulsar-3.1.2",title:"Apache Pulsar 3.1.2",sidebar_label:"Apache Pulsar 3.1.2"}},u={},o=[{value:"2024-01-02",id:"2024-01-02",level:4},{value:"PIPs",id:"pips",level:2},{value:"Broker",id:"broker",level:3},{value:"Transaction",id:"transaction",level:3},{value:"CI and Test",id:"ci-and-test",level:3},{value:"Security",id:"security",level:3},{value:"Build",id:"build",level:3},{value:"Others",id:"others",level:3}],s={toc:o},h="wrapper";function c(e){let{components:t,...a}=e;return(0,i.kt)(h,(0,r.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h4",{id:"2024-01-02"},"2024-01-02"),(0,i.kt)("h2",{id:"pips"},"PIPs"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"PIP-318: Support not retaining null-key message during topic compaction by @coderzc in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21578"},"#21578"))),(0,i.kt)("h3",{id:"broker"},"Broker"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Fixed ServiceUnitStateChannel monitor to tombstone only inactive bundle states by @heesung-sn in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21721"},"#21721")),(0,i.kt)("li",{parentName:"ul"},"Fix typo in the config key by @coderzc in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21690"},"#21690")),(0,i.kt)("li",{parentName:"ul"},"Record GeoPersistentReplicator.msgOut before producer#sendAsync by @nodece in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21673"},"#21673")),(0,i.kt)("li",{parentName:"ul"},"Print recoverBucketSnapshot log if cursorProperties are empty by @coderzc in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21651"},"#21651")),(0,i.kt)("li",{parentName:"ul"},"Support not retaining null-key message during topic compaction by @coderzc in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21601"},"#21601")),(0,i.kt)("li",{parentName:"ul"},"Delete topic timeout due to NPE by @poorbarcode in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21595"},"#21595")),(0,i.kt)("li",{parentName:"ul"},"Duplicate LedgerOffloader creation when namespace/topic policies are updated by @shibd in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21591"},"#21591")),(0,i.kt)("li",{parentName:"ul"},"Fix issue with consumer read uncommitted messages from compacted topic by @coderzc in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21571"},"#21571")),(0,i.kt)("li",{parentName:"ul"},"Fix create topic with different auto creation strategies causes race condition by @mattisonchao in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21545"},"#21545")),(0,i.kt)("li",{parentName:"ul"},"Fix orphan scheduled task for ledger create timeout check by @poorbarcode in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21542"},"#21542")),(0,i.kt)("li",{parentName:"ul"},"Fix thousands orphan PersistentTopic caused OOM by @poorbarcode in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21540"},"#21540")),(0,i.kt)("li",{parentName:"ul"},"Fix unfinished callback when deleting managed ledger by @mattisonchao in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21530"},"#21530")),(0,i.kt)("li",{parentName:"ul"},"Fix setReplicatedSubscriptionStatus incorrect behavior by @liudezhi2098 in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21510"},"#21510")),(0,i.kt)("li",{parentName:"ul"},"Fix failure while creating non-durable cursor with inactive managed-ledger by @rdhabalia in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21508"},"#21508")),(0,i.kt)("li",{parentName:"ul"},"Fix PulsarService/BrokerService shutdown when brokerShutdownTimeoutMs=0 by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21496"},"#21496")),(0,i.kt)("li",{parentName:"ul"},"Do not write replicated snapshot marker when the topic which is not enable replication by @liangyepianzhou in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21495"},"#21495")),(0,i.kt)("li",{parentName:"ul"},"Avoid pass null role in MultiRolesTokenAuthorizationProvider by @mattisonchao in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21486"},"#21486")),(0,i.kt)("li",{parentName:"ul"},"Fix the deadlock when using BookieRackAffinityMapping with rackaware policy by @erobot in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21481"},"#21481")),(0,i.kt)("li",{parentName:"ul"},"Fix issue with consumer read uncommitted messages from compacted topic by @coderzc in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21465"},"#21465")),(0,i.kt)("li",{parentName:"ul"},"Fix resource_quota_zpath by @AnonHxy in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21461"},"#21461")),(0,i.kt)("li",{parentName:"ul"},"Fix namespace bundle stuck in unloading status by @mattisonchao in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21445"},"#21445")),(0,i.kt)("li",{parentName:"ul"},"Ignore individual acknowledgment for CompactorSubscription when an entry has been filtered. by @coderzc in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21434"},"#21434")),(0,i.kt)("li",{parentName:"ul"},"Fix MultiRoles token provider NPE when using anonymous clients by @Technoboy- in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21429"},"#21429")),(0,i.kt)("li",{parentName:"ul"},"Fix heartbeat namespace create event topic and cannot delete heartbeat topic by @TakaHiR07 in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21360"},"#21360")),(0,i.kt)("li",{parentName:"ul"},"Fix heartbeat namespace create transaction internal topic by @TakaHiR07 in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21348"},"#21348")),(0,i.kt)("li",{parentName:"ul"},"Fix unload operation stuck when use ExtensibleLoadManager by @Demogorgon314 in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21332"},"#21332")),(0,i.kt)("li",{parentName:"ul"},"Fix lookup heartbeat and sla namespace bundle when using extensible load manager(#21213) by @Demogorgon314 in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21314"},"#21314")),(0,i.kt)("li",{parentName:"ul"},"Fix thread safe issue with RangeCache.put and RangeCache.clear by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21302"},"#21302")),(0,i.kt)("li",{parentName:"ul"},"use ConcurrentHashMap in ServiceUnitStateChannel and avoid recursive update error by @heesung-sn in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21282"},"#21282")),(0,i.kt)("li",{parentName:"ul"},"Fix inconsistent topic policy by @mattisonchao in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21255"},"#21255")),(0,i.kt)("li",{parentName:"ul"},"Let the producer request success at the first time if the previous one is inactive by @poorbarcode in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21220"},"#21220")),(0,i.kt)("li",{parentName:"ul"},"Fix lookup heartbeat and sla namespace bundle when using extensible load manager by @Demogorgon314 in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21213"},"#21213")),(0,i.kt)("li",{parentName:"ul"},"Avoid record inactiveproducers when deduplication is disable by @lifepuzzlefun in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21193"},"#21193")),(0,i.kt)("li",{parentName:"ul"},"Make specified producer could override the previous one by @poorbarcode in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21155"},"#21155")),(0,i.kt)("li",{parentName:"ul"},"Rackaware policy is ineffective when delete zk rack info after bkclient initialize by @TakaHiR07 in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20944"},"#20944")),(0,i.kt)("li",{parentName:"ul"},"Check that the super user role is in the MultiRolesTokenAuthorizationProvider plugin by @tuteng in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20939"},"#20939"))),(0,i.kt)("h3",{id:"transaction"},"Transaction"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"OpRequestSend reuse problem cause tbClient commitTxnOnTopic timeout unexpectedly by @TakaHiR07 in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21505"},"#21505")),(0,i.kt)("li",{parentName:"ul"},"Ack all message ids when ack chunk messages with transaction by @liangyepianzhou in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21268"},"#21268"))),(0,i.kt)("h3",{id:"ci-and-test"},"CI and Test"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Fix LocalBookkeeperEnsemble resource leak in tests by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21407"},"#21407")),(0,i.kt)("li",{parentName:"ul"},'Add new CI unit test group "Broker Group 4" with cluster migration tests by @lhotari in ',(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21391"},"#21391")),(0,i.kt)("li",{parentName:"ul"},"Fix resource leaks with Pulsar Functions tests by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21378"},"#21378")),(0,i.kt)("li",{parentName:"ul"},"Fix some resource leaks in compaction tests by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21374"},"#21374")),(0,i.kt)("li",{parentName:"ul"},"Fix a resource leak in ClusterMigrationTest by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21366"},"#21366")),(0,i.kt)("li",{parentName:"ul"},"Fix docker image building by releasing more disk space before building by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21365"},"#21365")),(0,i.kt)("li",{parentName:"ul"},"Fix flaky CompactionTest.testDispatcherMaxReadSizeBytes by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21329"},"#21329")),(0,i.kt)("li",{parentName:"ul"},"Fix flaky test NarUnpackerTest by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21328"},"#21328")),(0,i.kt)("li",{parentName:"ul"},"Fix zookeeper related flacky test by @horizonzy in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21310"},"#21310")),(0,i.kt)("li",{parentName:"ul"},"fix flaky test PatternTopicsConsumerImplTest by @poorbarcode in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21222"},"#21222"))),(0,i.kt)("h3",{id:"security"},"Security"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Upgrade rabbitmq client to address CVE-2023-46120 by @liangyepianzhou in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21619"},"#21619")),(0,i.kt)("li",{parentName:"ul"},"Upgrade Zookeeper to 3.8.3 to address CVE-2023-44981 by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21398"},"#21398")),(0,i.kt)("li",{parentName:"ul"},"Upgrade Netty to 4.1.100 to address CVE-2023-44487 by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21397"},"#21397")),(0,i.kt)("li",{parentName:"ul"},"Upgrade Jetty to 9.4.53 to address CVE-2023-44487 by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21395"},"#21395")),(0,i.kt)("li",{parentName:"ul"},"Fix MultiRoles token provider when using anonymous clients by @merlimat in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21338"},"#21338")),(0,i.kt)("li",{parentName:"ul"},"Add OWASP Dependency Check suppressions by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21281"},"#21281")),(0,i.kt)("li",{parentName:"ul"},"Upgrade snappy-java to 1.1.10.5 by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21280"},"#21280"))),(0,i.kt)("h3",{id:"build"},"Build"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Fix Stage Docker images fail on M1 Mac by @AnonHxy in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21659"},"#21659")),(0,i.kt)("li",{parentName:"ul"},"Fix apt download issue in building the docker image by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21489"},"#21489")),(0,i.kt)("li",{parentName:"ul"},"Rename schema_example.conf to schema_example.json by @poorbarcode in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21447"},"#21447")),(0,i.kt)("li",{parentName:"ul"},"Upgrade Lombok to 1.18.30 to support compiling with JDK21 by @lhotari in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21278"},"#21278"))),(0,i.kt)("h3",{id:"others"},"Others"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[offload]"," Don't cleanup data when offload met MetaStore exception by @zymap in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21686"},"#21686")),(0,i.kt)("li",{parentName:"ul"},"[proxy]"," Move status endpoint out of auth coverage by @mattisonchao in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21428"},"#21428")),(0,i.kt)("li",{parentName:"ul"},"[auto-recovery]"," Migrate the replication testing from BookKeeper to Pulsar by @horizonzy in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21340"},"#21340")),(0,i.kt)("li",{parentName:"ul"},"[bk-client]"," Fix bk client MinNumRacksPerWriteQuorum and EnforceMinNumRacksPerWriteQuorum not work problem by @horizonzy in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21327"},"#21327")),(0,i.kt)("li",{parentName:"ul"},"[sql]"," Support UUID for json and avro by @liangyepianzhou in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/21267"},"#21267")),(0,i.kt)("li",{parentName:"ul"},"[log]"," fix the vague response if topic not found by @poorbarcode in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/pulsar/pull/20932"},"#20932"))))}c.isMDXComponent=!0}}]);