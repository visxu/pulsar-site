!function(o,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.DocsifyPluginToc=n():o.DocsifyPluginToc=n()}(this,(()=>(()=>{"use strict";var o={};const n=()=>{const o=window.innerHeight,n=document.querySelectorAll(`#main ${window.$docsify.toc.target}`);let e=[];n.forEach(((n,t)=>{const i=n.getBoundingClientRect();i.top<=o&&i.height+i.top>0&&e.push(t)}));const t=document.scrollingElement||document.body;0===t.scrollTop?e=[0]:t.offsetHeight-window.innerHeight-t.scrollTop<5&&e.length>0&&(e=[e[0]]),e.length&&document.querySelectorAll(".page_toc>div").forEach(((o,n)=>{n===e[0]?o.classList.add("active"):o.classList.remove("active")}))};return window.$docsify||(window.$docsify={}),window.$docsify.plugins=(window.$docsify.plugins||[]).concat((function(o,e){o.mounted((function(){const o=window.Docsify.dom.find(".content");if(o){const n=window.Docsify.dom.create("aside","");window.Docsify.dom.toggleClass(n,"add","toc-nav"),window.Docsify.dom.before(o,n)}})),o.doneEach((function(){const o=window.Docsify.dom.find(".toc-nav");o&&(o.innerHTML=function(o){let n=['<div class="page_toc">'];const e=[];return(o=document.querySelectorAll(`#main ${window.$docsify.toc.target}`))&&o.forEach((function(o){const n=function(o,n){return o>=1&&o<=window.$docsify.toc.tocMaxLevel?['<div class="lv'+o+'">',n,"</div>"].join(""):""}(o.tagName.replace(/h/gi,""),o.innerHTML);n&&e.push(n)})),e.length>0?(n=n.concat(e),n.push("</div>"),n.join("")):""}().trim(),""===o.innerHTML?(window.Docsify.dom.toggleClass(o,"add","nothing"),window.document.removeEventListener("scroll",n)):(window.Docsify.dom.toggleClass(o,"remove","nothing"),n(),window.document.addEventListener("scroll",n)))}))})),o.default})()));